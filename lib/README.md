## format(data[, settings[, converter]])

Функция принимает данные в формате Unipika-YSON (далее Unipika), либо при наличии конвертера в любом другом формате и форматирует данные согласно их типу. На данный момент существует два встроенных конвертера:

- YSON to Unipikа
- YQL to Unipika

### Примеры

[Посмотреть](https://github.yandex-team.ru/pages/data-ui/unipika/example/)

### Список поддерживаемых типов:

|Исходный формат|Типы|
|---|---|
|YSON|`string`, `number`, `int64`, `uint64`, `double`, `map`, `list`, `null`|
|YQL|`yql.string`, `yql.int64`, `yql.uint64`, `yql.double`, `yql.struct`, `yql.dict`, `yql.list`, `yql.tuple`, `yql.null`, `yql.yson`|

Похожие по смыслу типы отображаются похоже. Например, `int64` и `yql.int64`, `map` и `yql.struct` и так далее.

Предполагается, что типы не могут быть смешаны в произвольном виде, то есть, например, `list` не может иметь элементы типа `yql.string`, тем не менее библиотека не предпринимает попыток исправить неправильные данные в таком случае. При использовании встроенного конвертера такой ситуации произойти не должно. Также, например, только YSON типы могут иметь атрибуты, для остальных типов специальное поле `$attributes` не имеет смысла.

### Настройки форматтера:

|Название(name)|Тип(type)|Значение по умолчанию(default value)|Описание(description)|
|---|---|---|---|
|format|String|`'json'`|`[YSON-specific]` Влияет на отображение YSON типов, поддерживается сериализация в текстовый `yson` или в `json`. Об этих способах представления можно почитать в документации YT.|
|decodeUTF8|Boolean|`true`|`[YSON-Converter][YSON-specific]` Опция передается в конвертер (YSON to Unipikа). Показывает, нужно ли пытаться декодировать данные. Данные, полученные из YT с опцией { encode_utf8 = false } декодировать не надо (также это означает, что все строки являются валидными UTF8 последовательностями, то есть не являются бинарными). По умолчанию данные из YT получаются с опцией { encode_utf8 = true } и их необходимо декодировать; строки, которые не удается декодировать, помечаются как бинарные. |
|showDecoded|Boolean|`true`|`[NCP][YSON-specific]` Показывает, следует ли отображать декодированные данные, либо показывать данные в том виде, в котором они получены из YT.|
|binaryAsHex|Boolean|`true`|`[NCP][YSON-specific]` Показывает, следует ли отображать бинарные строки в виде последовательности HEX-чисел.|
|asHTML|Boolean|`true`| Возвращать сериализованные данные в `plain text` или `html`.|
|break|Boolean|`true`| Ставить переносы и отступы или вернуть всё в виде одной строки.|
|indent|Number|`4`| Размер отсупа.|
|compact|Boolean|`false`| Режим, в котором сложные типы, такие как `map`, `list`, `yql.struct` и так далее, отображаются более компактно, если содержат только один элемент.|
|highlightControlCharacter|Boolean|`false`|Включает подсветку управляющих спецсимволов в html-строках.|
|escapeWhitespace|Boolean|`true`|`[NCP]`Режим, в котором символы переноса и табуляции не экранируются, при использовании данной опции удобнее просматривать отформатированные данные типа стей-трейсов. |
|escapeYQLStrings|Boolean|`true`|`[NCP][YQL-Converter]`Режим, в котором никакие символы не экранируются вообще, чтобы пользователь мог получить "сырой" выход. |
|nonBreakingIndent|Boolean|`true`|Режим, в котором отступы, пробел в разделителе key-value и пробелы в бинарном представлении строк являются неразрывными (символ `&nbsp;`). |
|omitStructNull|Boolean|`false`|`[YQL-Converter]` Показывает, следует ли пропускать ключи со значением `null` в типе `yql.struct`. |
|maxListSize|Number|`undefined`|`[YQL-Converter]` Максимальный допустимый размер списковых нод (`yql.list`, `yql.dict`, `yql.struct`, `yql.tuple`, `yql.stream`). Если задано значение > 0, нода обрезается до этого значения. |
|maxStringSize|Number|`undefined`|`[YQL-Converter]` Максимальный допустимый размер строки (`yql.string`, `yql.utf8`). Если задано значение > 0, строка обрезается до этого значения. |
|limitMapLength|Number|`undefined`| Максимальный допустимый размер всех map нод. Если задано значение > 0, нода обрезается до этого (значения - 1). |
|limitListLength|Number|`undefined`| Максимальный допустимый размер всех list нод. Если задано значение > 0, нода обрезается до этого (значения - 1). |

`[YQL-Converter]` - Опция влияет только на конвертирование данных из формата YQL.
`[YSON-Converter]` - Опция влияет только на конвертирование данных из формата YSON.
`[YSON-Specific]` - Опция влияет только на представление YSON типов и не должна влиять на представление остальных типов.
`[NCP]` - (Non copy-pastable) данное преставление данных используется для улучшение читаемости, но не является валидным; копирование и использование таких данных может привести к ошибке.

## formatFromYSON(data[, settings])

Обертка для функции format, данные передаются в формате YSON, используется конвертер YSON to Unipika.

## formatFromYQL(data[, settings])

Обертка для функции format, данные передаются в формате YQL (в виде списка `[data, dataType]`), используется конвертер YQL to Unipika.
